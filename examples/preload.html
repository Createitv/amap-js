<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>AMapJS preload</title>
  <link rel="stylesheet" href="./assets/style.css">
  <script src="./assets/log.js"></script>
</head>
<body>
<h1 id="header">AMapJS 使用示例</h1>
<div id="main">
  <div id="map"></div>
  <div id="info"></div>
</div>
<script type="text/javascript" src="../dist/amap-js.js"></script>
<script type="text/javascript">
  // 创建AMapJSAPI Loader
  var aMapJSAPILoader = new AMapJS.AMapJSAPILoader({ key: "您申请的key值" });

  // 创建AMapUI Loader
  var aMapUILoader = new AMapJS.AMapUILoader();

  // 预加载aMapJSAPI和aMapUI
  var aMapJSAPILoad = aMapJSAPILoader.load();
  var aMapUILoad = aMapUILoader.load();

  // 使用
  console.log("3s其他处理");
  setTimeout(function () {
    aMapJSAPILoad.then(function(AMap) {
      aMapUILoad.then(function(initAMapUI) {
        var AMapUI = initAMapUI(); // 这里调用initAMapUI初始化并返回AMapUI

        // 其他逻辑
        console.log(AMapUI);
        new AMap.Map(document.getElementById("map"));
        document.getElementById("info").innerHTML = [
          "<pre>" + log.AMapLog(AMap) + "</pre>",
          "<pre>" + log.AMapUILog(AMapUI) + "</pre>"
        ].join("");
      });
    });
  }, 3000);
</script>
</body>
</html>
